# Periodic Info Reminder (周期性信息提醒工具)

一个轻量级的、基于文件的热点信息周期性提醒工具，旨在替代那些用于临时记忆的纸质便签。

---

## 目录 (Table of Contents)

*   [**面向用户 (For Users)**](#面向用户-for-users)
    *   [项目简介：它解决了什么问题？](#项目简介它解决了什么问题)
    *   [核心功能](#核心功能)
    *   [快速上手指南](#快速上手指南)
    *   [重要提醒：它不是什么？](#重要提醒它不是什么)
*   [**面向开发者 (For Developers)**](#面向开发者-for-developers)
    *   [项目架构](#项目架构)
    *   [主要依赖](#主要依赖)
    *   [如何添加新功能（给未来的自己）](#如何添加新功能给未来的自己)
---

## 面向用户 (For Users)

### 项目简介：它解决了什么问题？

你是否也曾有过这样的经历：为了记住某个临时的信息——比如一个会议要点、一个API密钥、一张流程图截图——你随手把它写在了一张便利贴上，并贴在显示器旁边？

这个项目的初衷，就是为了用一种更现代、更高效的方式**替代这些传统的纸笔**。


如果你试图用它来写长篇大论或管理项目，那一定会非常痛苦。请将它用于其最擅长的领域：**简单、独立、需要周期性回顾的信息点。**

### 核心功能

*   **基于本地文件**: 支持 `.md` 和常见图片格式。
*   **灵活的计划**: 可按分钟/小时/天/周（可多选）设置提醒。
*   **两种提醒模式**: “系统通知”（右下角弹窗）或“直接显示”（用编辑器打开）。
*   **自定义编辑器**: 为不同文件类型指定你喜欢的程序。
*   **开机自启 & 系统托盘**: 设置后即可忘记，它会在后台安静工作。

### 快速上手指南

1.  **设置文件夹**: 首次运行，点击`设置`，指定一个“**数据文件夹**”。你所有的笔记都放这里。
2.  **放入笔记**: 在该文件夹中创建一个 `.md` 文件或放入一张图片。
3.  **设置提醒**:
    *   在软件左侧列表中**选中**你的文件。
    *   在右侧面板**设定提醒规则**（如“每 3 天，在 10:30”）。
    *   点击绿色的 **`保存`** 按钮。
4.  **完成**: 设置好的笔记在列表中会**变绿**。现在软件会自动在后台按时提醒你。

### 重要提醒：它不是什么？

请务-必-不要用错地方！

*   **它不是 Notion 或 Obsidian**：它不用于构建复杂的知识网络或管理你的整个知识体系。
*   **它不是待办事项（Todo）应用**：它不关心任务是否“完成”，只关心信息是否被“回顾”。
*   **它不是云笔记**：所有文件都存储在你本地的文件夹中，没有云同步功能。


---


### 面向开发者 (For Developers)

**或者直接丢给AI。**

#### 项目架构

本项目采用模块化的结构，核心逻辑与UI分离，易于维护和扩展。

*   `main.py`
    *   **职责**：程序入口。负责初始化日志、核心组件（配置、笔记、调度器）以及启动主GUI应用。

*   `config_manager.py`
    *   **职责**：负责所有配置文件的读写操作。它管理一个 `config.json` 文件，其中包含全局设置（如编辑器路径）和每个笔记的调度信息。所有对配置的修改都应通过这个类进行，以确保数据的一致性和持久化。

*   `note_manager.py`
    *   **职责**：负责扫描和识别指定数据文件夹中的笔记文件。它定义了支持的文件类型（Markdown 和图片），并提供了一个接口来获取所有有效的笔记列表。

*   `scheduler_service.py`
    *   **职责**：后台调度和提醒执行的核心。它使用 `schedule` 库来管理所有的定时任务。`reload_schedules` 方法会从 `ConfigManager` 读取所有任务并设置它们。当任务触发时，它会根据提醒模式调用相应的提醒方法（`show_light_reminder` 或 `show_popup_reminder`）。

*   `startup.py`
    *   **职责**：处理 Windows 平台的开机自启逻辑。通过在系统的“启动”文件夹中创建或删除快捷方式来实现。

*   **`ui/` 目录 (用户界面)**
    *   `app_main.py`
        *   **职责**：主应用窗口 `App` 类的所在地。它是所有UI组件的容器和协调者，负责整体布局、事件绑定（如窗口拖动、关闭）以及连接UI操作与后端逻辑（如点击保存按钮后调用 `ConfigManager`）。
    *   `left_panel.py`
        *   **职责**：定义了主窗口左侧的笔记列表区域，包括列表框本身和底部的“刷新”、“浏览目录”按钮。
    *   `settings_panel.py`
        *   **职责**：定义了主窗口右上方的全局设置区域，包括数据文件夹、编辑器路径和开机自启选项的UI和逻辑。
    *   `schedule_panel.py`
        *   **职责**：定义了主窗口右下方的提醒设置区域。这是UI中最复杂的部分，负责动态构建提醒规则的界面，并根据用户的输入生成 `schedule` 库能够理解的规则字符串。
    *   `tray_icon.py`
        *   **职责**：管理程序的系统托盘图标和菜单，处理最小化到托盘和从托盘恢复窗口的逻辑。

#### 主要依赖

*   `customtkinter`: 用于构建现代风格的GUI界面。
*   `schedule`: 一个轻量级的、人类友好的任务调度库。
*   `win10toast-click`: 用于发送可点击的Windows系统通知。
*   `loguru`: 一个功能强大且易于使用的日志记录库。
*   `winshell`: 用于方便地访问Windows的特殊文件夹（如“启动”文件夹）。
*   `pystray`: 用于创建和管理系统托盘图标。

#### 如何添加新功能（给未来的自己）

这是一个为你未来回顾项目时准备的快速指南。

*   **如果要修改UI布局或添加新的UI组件...**
    *   **定位**：`ui/` 目录下的 `app_main.py` (整体布局), `left_panel.py`, `settings_panel.py`, `schedule_panel.py` (具体面板)。
    *   **思路**：找到对应的面板文件，使用 `customtkinter` 的组件进行添加和布局。如果新组件需要与后端逻辑交互，请在 `app_main.py` 中定义相应的处理方法，并将其作为回调函数传递给UI组件。

*   **如果要支持一种新的提醒规则（例如“每月一次”)...**
    *   **定位**：`ui/schedule_panel.py` 和 `scheduler_service.py`。
    *   **步骤**：
        1.  在 `schedule_panel.py` 的 `_init_schedule_builder` 中添加新的UI选项（例如一个新的OptionMenu值）。
        2.  修改 `on_unit_change` 方法来控制新选项与其他UI组件的显隐关系。
        3.  修改 `save_current_schedule` 方法，为新规则生成一个 `schedule` 库能识别的字符串 (例如 `.monthly`)。
        4.  修改 `parse_and_load_schedule_rule` 方法，使其能够反向解析这个新规则并正确地在UI上显示出来。
        5.  `scheduler_service.py` 的 `reload_schedules` 方法由于使用了 `eval()`，大概率无需修改即可支持新的规则字符串，但最好进行测试。

*   **如果要改变提醒的行为（例如，增加一种新的提醒模式）...**
    *   **定位**：`scheduler_service.py` 和 `ui/schedule_panel.py`。
    *   **步骤**：
        1.  在 `scheduler_service.py` 中实现新的提醒方法，例如 `show_new_reminder()`。
        2.  修改 `trigger_reminder` 方法，增加一个新的 `elif mode == 'new_mode'` 分支来调用你的新方法。
        3.  在 `ui/schedule_panel.py` 的 `_init_schedule_builder` 中添加一个新的 `CTkRadioButton` 作为新模式的选项。
        4.  确保 `save_current_schedule` 和 `parse_and_load_schedule_rule` 能正确处理这个新的 `mode` 值。

*   **如果要添加一个新的全局设置...**
    *   **定位**：`config_manager.py` 和 `ui/settings_panel.py`。
    *   **步骤**：
        1.  在 `config_manager.py` 的 `default_config` 中添加新的设置项及其默认值。
        2.  在 `ui/settings_panel.py` 中添加对应的UI输入控件（如 `CTkEntry` 或 `CTkCheckBox`）。
        3.  修改 `load_settings_to_gui` 方法，从配置中读取值并显示在UI上。
        4.  修改 `save_gui_settings` 方法，将UI上的新值保存到配置中。
        5.  在需要使用这个设置的地方，通过 `self.app.config_manager.get_setting("your_new_setting")` 来获取它。
````